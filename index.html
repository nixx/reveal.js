<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Maven</title>

    <meta name="author" content="Øyvind Bø Syrstad">

    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="css/theme/night.css" id="theme">
    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">
    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
        document.write('<link rel="stylesheet" href="css/print/' + ( window.location.search.match(/print-pdf/gi) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">');
    </script>
    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

<div class="reveal">
<div class="slides">
<section>
    <h2>Hvorfor står jeg her?</h2>
</section>
<section>
    <h1>Disclaimer</h1>
    <ul>
        <li class="fragment">Har jobbet ganske mye med Maven</li>
        <li class="fragment">Ingen kjappe løsninger</li>
        <li class="fragment">Mine meninger</li>
        <li class="fragment">Aldri sett det blitt gjort perfekt</li>
    </ul>
</section>

<section>
    <h2>Hvorfor har vi egentlig maven?</h2>
</section>

<section>
    <h2>Ant, Make, plain javac</h2>
</section>

<section>
    <ul>
        <li>ClassNotFoundError</li>
        <li>Jar hell</li>
        <li>"Smarte" løsninger</li>
    </ul>
</section>
<section>
    <section>
        <h2>Maven to the rescue</h2>
        <pre class="fragment">
        &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;
        &lt;version&gt;2.0.8&lt;/version&gt;
        &lt;/dependency&gt;
        </pre>
    </section>
    <section>
        <h2>Utfordringer</h2>

        <p>Classpath mismatch</p>

        <p>Dependency hell</p>
    </section>
    <section>
				<pre>
[INFO] org.test:test-dep1:jar:1.0-SNAPSHOT
[INFO] \- org.springframework:spring-beans:jar:2.0.8:compile
[INFO]    +- commons-logging:commons-logging:jar:1.1:compile
[INFO]    |  +- log4j:log4j:jar:1.2.12:compile
[INFO]    |  +- logkit:logkit:jar:1.0.1:compile
[INFO]    |  +- avalon-framework:avalon-framework:jar:4.1.3:compile
[INFO]    |  \- javax.servlet:servlet-api:jar:2.3:compile
[INFO]    \- org.springframework:spring-core:jar:2.0.8:compile
				</pre>
    </section>
</section>

<section>
    <h2>Recap scopes</h2>
    <ul>
        <li class="fragment">test</li>
        <li class="fragment">compile</li>
        <li class="fragment">runtime</li>
        <li class="fragment">provided</li>
        <li class="fragment">system</li>
    </ul>
    <p class="fragment">optional/import</p>
</section>

<section>
    <h2>Versioner</h2>

    <p class="fragment">
        &lt;version&gt;[3.8,4.0)&lt;/version&gt;
    </p>

    <p class="fragment">
        &lt;version&gt;[3.8]&lt;/version&gt;
    </p>

    <p class="fragment">
        &lt;version&gt;3.8&lt;/version&gt;
    </p>
</section>
<section>
    <h2>Nærmeste i grafen brukes</h2>
</section>
<section>
				<pre>
[INFO] org.test:test-dep1:jar:1.0-SNAPSHOT
[INFO] +- org.springframework:spring-beans:jar:2.0.8:compile
[INFO] |  +- commons-logging:commons-logging:jar:1.1:compile
[INFO] |  |  +- log4j:log4j:jar:1.2.12:compile
[INFO] |  |  +- logkit:logkit:jar:1.0.1:compile
[INFO] |  |  +- avalon-framework:avalon-framework:jar:4.1.3:compile
[INFO] |  |  \- javax.servlet:servlet-api:jar:2.3:compile
[INFO] |  \- org.springframework:spring-core:jar:2.0.8:compile
[INFO] \- org.springframework:spring-web:jar:2.5.2:compile
[INFO]    \- org.springframework:spring-context:jar:2.5.2:compile
[INFO]       \- aopalliance:aopalliance:jar:1.0:compile
</pre>
</section>
<section>
<pre>
[INFO] org.test:test-dep1:jar:1.0-SNAPSHOT
[INFO] +- junit:junit:jar:3.8.1:test
[INFO] +- org.springframework:spring-web:jar:2.5.2:compile
[INFO] |  +- commons-logging:commons-logging:jar:1.1.1:compile
[INFO] |  +- org.springframework:spring-context:jar:2.5.2:compile
[INFO] |  |  \- aopalliance:aopalliance:jar:1.0:compile
[INFO] |  \- org.springframework:spring-core:jar:2.5.2:compile
[INFO] \- org.springframework:spring-beans:jar:2.0.8:compile
</pre>
</section>
<section>
    <p>
        Luckily, Maven provides a way for you to consolidate dependency version numbers in the
        dependencyManagement element. You’ll usually see the dependencyManagement element in a top-level parent
        POM for an organization or project. Using the dependencyManagement element in a pom.xml allows you to
        reference a dependency in a child project without having to explicitly list the version. Maven will walk
        up the parent-child hierarchy until it finds a project with a dependencyManagement element, it will then
        use the version specified in this dependencyManagement element.
    </p>
</section>
<section>
				<pre>
				&lt;dependency&gt;
						&lt;groupId&gt;org.springframework&lt;/groupId&gt;
						&lt;artifactId&gt;spring-beans&lt;/artifactId&gt;
				&lt;/dependency&gt;
                </pre>
</section>
<section>
    <section>
        <h2>Apps vs. Libs</h2>

        <div>
            <p class="fragment">Libs skal brukes av mange</p>
            <ul>
                <li class="fragment">Få transitive avhengigheter</li>
                <li class="fragment">Ingen kobling til runtime</li>
            </ul>

        </div>
        <div>
            <p class="fragment">App skal deployes</p>
            <ul>
                <li class="fragment">Full kontroll på avhengigheter</li>
                <li class="fragment">Inneholder konfigurasjon</li>
                <li class="fragment">Avhengigheter til runtime</li>
            </ul>
        </div>
    </section>
    <section>
        <h2>Konkret om Libs</h2>

        <p>Ikke inneholde loggerammeverk</p>

        <p>Ikke inneholde CXF transport/conduit/security avhengigheter (med mindre de løser akkurat det)</p>

        <p>Hibernate runtime?</p>
    </section>
    <section>
        <h2>Konkret om Apps</h2>

        <p>Websphere MQ avhengiheter</p>

        <p>Konfigurasjon</p>

        <p>Man MÅ ha kontroll på avhengigheter. Vi vil vite hva cp er

        <p>
    </section>
    <section>
        <h2>Gode eksempler</h2>

        <p>Sfl4J</p>

        <p>jax-ws/jax-rs</p>
    </section>
    <section>
        <h2>Dårlige eksempler</h2>

        <p>xercesImpl</p>

        <p>commons-logging</p>

        <p>log4j</p>

        <p>Spring config i avhengigheter</p>

        <p>Spring annotations</p>
    </section>
</section>

<section>
    <h2>Eksempler fra STB</h2>
            <pre>
                <textarea style="width: 1000px;height:600px">
                    no.storebrand.rest:pension-rest-api:war:1.5-SNAPSHOT
                    +- no.storebrand.rest:common-rest-api:jar:1.7-SNAPSHOT:compile
                    | +- storebrand.felles.start:start4-api:jar:4.4.2:compile
                    | +- storebrand.felles.common:sbcommon-core:jar:4.2.14:compile
                    | +- storebrand.felles.util:storebrand-util:jar:3.5:compile
                    | +- joda-time:joda-time:jar:1.6.2:compile
                    | +- net.sf.json-lib:json-lib:jar:jdk15:2.4:compile
                    | | +- commons-beanutils:commons-beanutils:jar:1.8.0:compile
                    | | +- commons-collections:commons-collections:jar:3.2.1:compile
                    | | +- commons-logging:commons-logging:jar:1.1.1:compile
                    | | \- net.sf.ezmorph:ezmorph:jar:1.0.6:compile
                    | +- com.google.code.gson:gson:jar:2.2.2:compile
                    | +- com.sun.jersey:jersey-core:jar:1.17.1:compile
                    | +- com.sun.jersey:jersey-json:jar:1.17.1:compile
                    | | +- org.codehaus.jettison:jettison:jar:1.1:compile
                    | | +- com.sun.xml.bind:jaxb-impl:jar:2.2.3-1:compile
                    | | | \- javax.xml.bind:jaxb-api:jar:2.2.2:compile
                    | | | \- javax.xml.stream:stax-api:jar:1.0-2:compile
                    | | +- org.codehaus.jackson:jackson-core-asl:jar:1.9.2:compile
                    | | +- org.codehaus.jackson:jackson-mapper-asl:jar:1.9.2:compile
                    | | +- org.codehaus.jackson:jackson-jaxrs:jar:1.9.2:compile
                    | | \- org.codehaus.jackson:jackson-xc:jar:1.9.2:compile
                    | +- com.sun.jersey.contribs:jersey-multipart:jar:1.17.1:compile
                    | | \- org.jvnet:mimepull:jar:1.6:compile
                    | +- com.sun.jersey:jersey-client:jar:1.17.1:compile
                    | +- com.sun.jersey:jersey-server:jar:1.17.1:compile
                    | | \- asm:asm:jar:3.1:compile
                    | +- com.sun.jersey.contribs:jersey-spring:jar:1.17.1:compile
                    | | \- com.sun.jersey:jersey-servlet:jar:1.17.1:compile
                    | +- org.springframework:spring-core:jar:3.1.1.RELEASE:compile
                    | | \- org.springframework:spring-asm:jar:3.1.1.RELEASE:compile
                    | +- org.springframework:spring-beans:jar:3.1.1.RELEASE:compile
                    | +- org.springframework:spring-web:jar:3.1.1.RELEASE:compile
                    | +- org.springframework:spring-expression:jar:3.1.1.RELEASE:compile
                    | +- org.springframework:spring-aop:jar:3.1.1.RELEASE:compile
                    | +- org.springframework:spring-context:jar:3.1.1.RELEASE:compile
                    | +- org.springframework:spring-test:jar:3.1.1.RELEASE:compile
                    | +- org.springframework:spring-dao:jar:2.0.8:compile
                    | +- cglib:cglib:jar:2.2.2:compile
                    | +- org.aspectj:aspectjrt:jar:1.6.2:compile
                    | +- org.aspectj:aspectjtools:jar:1.6.0:compile
                    | +- org.aspectj:aspectjweaver:jar:1.6.1:compile
                    | +- org.aspectj:aspectjlib:jar:1.6.1:compile
                    | +- org.owasp.esapi:esapi:jar:2.0.1:compile
                    | | +- commons-configuration:commons-configuration:jar:1.5:compile
                    | | | \- commons-digester:commons-digester:jar:1.8:compile
                    | | +- commons-beanutils:commons-beanutils-core:jar:1.7.0:compile
                    | | +- commons-fileupload:commons-fileupload:jar:1.2:compile
                    | | +- xom:xom:jar:1.1:compile
                    | | | +- xerces:xmlParserAPIs:jar:2.6.2:compile
                    | | | +- xalan:xalan:jar:2.7.0:compile
                    | | | \- jaxen:jaxen:jar:1.1-beta-8:compile
                    | | | +- dom4j:dom4j:jar:1.6.1:compile
                    | | | \- jdom:jdom:jar:1.0:compile
                    | | +- org.beanshell:bsh-core:jar:2.0b4:compile
                    | | \- org.owasp.antisamy:antisamy:jar:1.4.3:compile
                    | | +- org.apache.xmlgraphics:batik-css:jar:1.7:compile
                    | | | +- org.apache.xmlgraphics:batik-ext:jar:1.7:compile
                    | | | +- org.apache.xmlgraphics:batik-util:jar:1.7:compile
                    | | | \- xml-apis:xml-apis-ext:jar:1.3.04:compile
                    | | +- net.sourceforge.nekohtml:nekohtml:jar:1.9.12:compile
                    | | \- commons-httpclient:commons-httpclient:jar:3.1:compile
                    | | \- commons-codec:commons-codec:jar:1.2:compile
                    | +- xerces:xercesImpl:jar:2.10.0:compile
                    | | \- xml-apis:xml-apis:jar:1.4.01:compile
                    | +- log4j:log4j:jar:1.2.17:compile
                    | \- org.slf4j:slf4j-log4j12:jar:1.5.8:compile
                    | \- org.slf4j:slf4j-api:jar:1.5.8:compile
                    +- no.storebrand.security:storebrand-common-security:jar:3.1.3.3-SNAPSHOT:compile
                    | +- org.springframework.security:spring-security-core:jar:3.1.3.RELEASE:compile
                    | \- org.springframework.security:spring-security-web:jar:3.1.3.RELEASE:compile
                    | \- org.springframework:spring-tx:jar:3.0.7.RELEASE:compile
                    +- org.springframework.security:spring-security-config:jar:3.1.3.RELEASE:compile
                    | \- aopalliance:aopalliance:jar:1.0:compile
                    +- commons-lang:commons-lang:jar:2.6:compile
                    +-
                    storebrand.klienter.fleksibeltuttak.engagement:fleksibeltuttak-engagement:jar:1.0.10-SNAPSHOT:compile
                    | +- storebrand.klienter.fleksibeltuttak.common:fleksibeltuttak-common:jar:1.0.10-SNAPSHOT:compile
                    | | \- storebrand.felles.common:handy-beans:jar:1.3:compile
                    | +- storebrand.felles:storebrand-felles-web:jar:1.18:compile
                    | | +- org.springframework:spring-orm:jar:3.1.0.RELEASE:compile
                    | | +- opensymphony:oscache:jar:2.4:compile
                    | | \- net.sf.ehcache:ehcache-core:jar:2.5.0:compile
                    | +- storebrand.felles.common:handy-mockcache:jar:1.3:compile
                    | | \- commons-io:commons-io:jar:1.3.2:compile
                    | +- storebrand.felles.common:sbcommon-cxf:jar:2.2.12:compile
                    | | +- org.apache.cxf:cxf-rt-frontend-simple:jar:2.2.12:compile
                    | | | \- org.apache.cxf:cxf-rt-bindings-soap:jar:2.2.12:compile
                    | | | +- org.apache.cxf:cxf-tools-common:jar:2.2.12:compile
                    | | | | \- javax.xml.soap:saaj-api:jar:1.3:compile
                    | | | \- org.apache.cxf:cxf-rt-databinding-jaxb:jar:2.2.12:compile
                    | | +- org.apache.cxf:cxf-api:jar:2.2.12:compile
                    | | | +- org.apache.cxf:cxf-common-utilities:jar:2.2.12:compile
                    | | | | +- org.apache.geronimo.specs:geronimo-stax-api_1.0_spec:jar:1.0.1:compile
                    | | | | \- wsdl4j:wsdl4j:jar:1.6.2:compile
                    | | | +- org.apache.ws.commons.schema:XmlSchema:jar:1.4.7:compile
                    | | | +- org.codehaus.woodstox:wstx-asl:jar:3.2.9:compile
                    | | | +- org.apache.neethi:neethi:jar:2.0.4:compile
                    | | | \- org.apache.cxf:cxf-common-schemas:jar:2.2.12:compile
                    | | +- org.apache.cxf:cxf-rt-databinding-aegis:jar:2.2.12:compile
                    | | +- org.apache.cxf:cxf-rt-core:jar:2.2.12:compile
                    | | +- org.apache.cxf:cxf-rt-transports-http:jar:2.2.12:compile
                    | | \- org.easymock:easymock:jar:2.4:compile
                    | +- storebrand.kollektiv.innskudd:kollektivinnskudd-api:jar:2.5.9:compile
                    | +- storebrand.services.oppgjor:oppgjor-api:jar:1.0.17:compile
                    | +- storebrand.services.engasjement:engasjement-api:jar:3.4.11:compile
                    | +- org.springframework:spring-context-support:jar:2.5.6:compile
                    | \- org.springframework:spring-jdbc:jar:2.5.6:compile
                    +-
                    storebrand.klienter.fleksibeltuttak.simulation:fleksibeltuttak-simulation:jar:1.0.10-SNAPSHOT:compile
                    | +- storebrand.felles.common:handy-utils:jar:1.3:compile
                    | +- storebrand.services.nav:nav-api:jar:2.1.1:compile
                    | +- storebrand.services.pensjonskasse:pensjonskasse-api:jar:3.4.2:compile
                    | \- storebrand.services.individual:individual-api:jar:3.1.10:compile
                    +- storebrand.kollektiv.ytelse.ytpperson:ytpperson-api:jar:12.2.1:compile
                    | +- storebrand.kollektiv.ytelse.ytpcommon:ytpcommon:jar:12.2.1:compile
                    | | \- storebrand.felles.organisasjon:organisasjon-api:jar:2.0.0:compile
                    | +- storebrand.kollektiv.ytelse.ytpbedrift:ytpbedrift-api:jar:12.2.0:compile
                    | \- org.apache.poi:poi:jar:3.2-FINAL:compile
                    +- storebrand.felles.customer:customer-api:jar:3.0.10.59:compile
                    | \- storebrand.felles.customer:customer-domain:jar:3.0.10.59:compile
                    +- storebrand.services.prognose:prognose-api:jar:2.1.6-SNAPSHOT:compile
                    +- storebrand.felles:tia-client:jar:7.6.1:compile
                    +- com.ibm:mq:jar:7.0.1.6:compile
                    +- javax.resource:connector:jar:1.0:compile
                    +- org.terracotta:ehcache-probe:jar:1.0.2:compile
                    +- storebrand.felles.web:util-servlet:jar:1.2.3:compile
                    | \- apache-log4j:log4j:jar:1.2.15:compile
                    +- javax.validation:validation-api:jar:1.1.0.Final:compile
                    +- org.hibernate:hibernate-validator:jar:5.0.1.Final:compile
                    | +- org.jboss.logging:jboss-logging:jar:3.1.1.GA:compile
                    | \- com.fasterxml:classmate:jar:0.8.0:compile
                    +- storebrand.felles.web:msm-servlet:jar:1.10:compile
                    | +- storebrand.felles.common:sbcommon-xml:jar:1.0.0:compile
                    | \- com.thoughtworks.xstream:xstream:jar:1.1.2:compile
                    | \- xpp3:xpp3_min:jar:1.1.3.4.O:compile
                    +- storebrand.services.link:link-api:jar:3.1.1:compile
                    +- storebrand.services.fond:fond-api:jar:1.1.4-SNAPSHOT:compile
                    +- org.eclipse.jetty.aggregate:jetty-all:jar:7.4.5.v20110725:compile
                    | +- org.apache.geronimo.specs:geronimo-jta_1.1_spec:jar:1.1.1:compile
                    | +- javax.mail:mail:jar:1.4.1:compile
                    | +- javax.activation:activation:jar:1.1:compile
                    | +- org.apache.geronimo.specs:geronimo-jaspic_1.0_spec:jar:1.0:compile
                    | +- org.apache.geronimo.specs:geronimo-annotation_1.0_spec:jar:1.1.1:compile
                    | \- asm:asm-commons:jar:3.1:compile
                    | \- asm:asm-tree:jar:3.1:compile
                    +- javax.servlet:servlet-api:jar:2.5:compile
                    +- org.eclipse.jetty:jetty-jsp-2.1:jar:7.4.5.v20110725:compile
                    +- org.mortbay.jetty:jsp-2.1-glassfish:jar:2.1.v20100127:compile
                    | +- org.eclipse.jdt.core.compiler:ecj:jar:3.5.1:compile
                    | +- org.mortbay.jetty:jsp-api-2.1-glassfish:jar:2.1.v20100127:compile
                    | \- ant:ant:jar:1.6.5:compile
                    \- junit:junit:jar:4.10:test (scope not updated to compile)
                    \- org.hamcrest:hamcrest-core:jar:1.1:test
                </textarea>
            </pre>
</section>
<section>
    <h2>Litt tooling</h2>
            <pre>
                mvn dependency:analyze -DignoreNonCompile=true
                mvn dependency:analyze-report -DignoreNonCompile=true
                mvn dependency:tree -DoutputFile="fil"
                IntelliJ
            </pre>
</section>
<section>
    <h2>Hva skal man ha som avhengighet?</h2>
    <p class="fragment">
        Runtimeavhengigheter i App. Gjerne i samle-POM?
    </p>
    <p class="fragment">
        Compile-time avhengighet til klasser man bruker?
    </p>
</section>
<section>
    <ul>
        <li class="fragment">Multimodulprosjekter :(</li>
        <li class="fragment">Delt konfigurasjon</li>
        <li class="fragment">Alltid dependency managment</li>
        <li class="fragment">Gradle? Ivy?</li>
    </ul>
</section>
<section>
    <h2>Spørsmål?</h2>
</section>
</div>

</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.min.js"></script>

<script>

    // Full list of configuration options available here:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

        // Optional libraries used to extend on reveal.js
        dependencies: [
            { src: 'lib/js/classList.js', condition: function () {
                return !document.body.classList;
            } },
            { src: 'plugin/markdown/marked.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            } },
            { src: 'plugin/markdown/markdown.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            } },
            { src: 'plugin/highlight/highlight.js', async: true, callback: function () {
                hljs.initHighlightingOnLoad();
            } },
            { src: 'plugin/zoom-js/zoom.js', async: true, condition: function () {
                return !!document.body.classList;
            } },
            { src: 'plugin/notes/notes.js', async: true, condition: function () {
                return !!document.body.classList;
            } }
        ]
    });

</script>

</body>
</html>
